This folder contains all the cases in the paper titled "A Flow Decomposition Method based on Computational Fluid Dynamics 
for Rock Weir Head-Discharge Relationship".

To demonstrate how to run the cases, the RL10 case is used as an example:
1. The mesh should be generated by executing the script "runMesh". 
2. The simulation should be run by executing the script "runCFD".

All simulations used OpenFOAM v5.x. For this research, all simulations were run in parallel with 160 cores. If run 
with less cores, the simulation time might be long.

For other simulation cases, the bed geometries (bed.stl) should be changed. All bed geomerites can be found in the folder 
named "bedSTL". The names of the files are defined in the paper. The simulated discharge Q can be changed in velocity file "U", 
specifically the "volumetricFlowRate" for the "inlet" boundary condition. 

Postprocessing:
1. The simulated water surface elevation (WSE.csv) was extracted in ParaView with contour alpha.water=0.5.
2. The simulated discharge was calculated by the integration of U normal to the streamwise direction with the weight of alpha.water.    


This folder also contains the python script for the use of the flow decomposition method. In addition, the Matlab code to generate 
the figure comparing new results and existing recommended Cd values is also included. 

-- 
Yi-Xuan Zeng
Ph.D. Candidate
Department of Civil and Environmental Engineering
Penn State UniversityÂ 
